Cyberpanel

Installation
	install from Cloud provider marketplace
	open ssh server and copy details

       35.209.222.125 GCP walexbizserver@gmail.com
       root
       1234567

	In a web browser, you can view:
	* CyberPanel: https://35.209.222.125:8090
	* openlitespeed: https://35.209.222.125:7080
              cd /usr/local/lsws/admin/misc
              sudo ./admpass.sh to reset username and password
	* phpMyAdmin: https://35.209.222.125:8090/dataBases/phpMyAdmin
	* Rainloop:   https://35.209.222.125:8090/rainloop
              Panel and openlitespeed u: admin                              
		Panel and openlitespeed p: 1234567
       
       20.166.87.6 Azure michael.edhere@walexbiznig.com
       testuser
       mememe6930..
              added aapanel
              aaPanel Internet Address: http://20.166.87.6:7800/df3853d9
              aaPanel Internal Address: http://10.0.0.4:7800/df3853d9
              username: sp9yhfa4
              password: 4cc0d68f


       CyberPanel: https://20.166.87.6:8090
       * phpMyAdmin: https://20.166.87.6:8090/dataBases/phpMyAdmin
       * Rainloop:   https://20.166.87.6:8090/rainloop
              Panel and openlitespeed username: admin                              
		Panel and openlitespeed password: 1234567

	On the server:
	* You can get the CyberPanel admin password with the following command:
	  sudo cat /home/ubuntu/.litespeed_password
	* You can get the Mysql cyberpanel user password with the following command:
	  sudo cat /home/ubuntu/.db_password
	* Run cyberpanel in cmd for options
              or run cyberpanel_utility

	OR

	apt update
	apt upgrade
	set root password for server
	install cyberpanel
		

       To Restart
       systemctl restart lscpd

       to upgrade cyberpanel
              sudo su -
              cyberpanel_utility
              select 1

       install watchdog
              cyberpanel_utility
              select 3

Extra Settings
	docker -> install
	mail settings
		spamassasin -> install
		email policy server -> enable
		mail scanner -> install
			login with admin and 1234567 (default)
	security
		modsecurity conf -> install
		MODSECURITY RULES PACK -> enable
		imunifyav ->install 
			login with system root and password login
              
              this is not necessary
		CSF (CONFIGSERVER SECURITY AND FIREWALL) -> install (reroutes firewall option)
              (csf uses iptables underneath, normal cyberpanel uses firewalld (firewall-cmd))
              to switch to UFW, 
                            systemctl stop firewalld
                            systemctl disable firewalld
              use in cmd - 
                     csf -h
                     -h,  --help
                            Show this message
                     -l,  --status
                            List/Show the IPv4 iptables configuration
                     -l6, --status6
                            List/Show the IPv6 ip6tables configuration
                     -s,  --start
                            Start the firewall rules
                     -f,  --stop
                            Flush/Stop firewall rules (Note: lfd may restart csf)
                     -r,  --restart
                            Restart firewall rules (csf)
                     -q,  --startq
                            Quick restart (csf restarted by lfd)
                     -sf, --startf
                            Force CLI restart regardless of LFDSTART setting
                     -ra, --restartall
                            Restart firewall rules (csf) and then restart lfd daemon. Both csf and then lfd should be restarted after making  any  changes  to
                            the configuration files
                     --lfd [stop|start|restart|status]
                            Actions to take with the lfd daemon
                     -a,  --add ip [comment]
                            Allow an IP and add to /etc/csf/csf.allow
                     -ar, --addrm ip
                            Remove an IP from /etc/csf/csf.allow and delete rule
                     -d,  --deny ip [comment]
                            Deny an IP and add to /etc/csf/csf.deny
                     -dr, --denyrm ip
                            Unblock an IP and remove from /etc/csf/csf.deny
                     -df, --denyf
                            Remove and unblock all entries in /etc/csf/csf.deny
                     -g,  --grep ip
                            Search the iptables and ip6tables rules for a match (e.g. IP, CIDR, Port Number)
                     -i,  --iplookup ip
                            Lookup IP address geographical information using CC_LOOKUPS setting in /etc/csf/csf.conf
                     -t,  --temp
                            Displays the current list of temporary allow and deny IP entries with their TTL and comment
                     -tr, --temprm ip
                            Remove an IP from the temporary IP ban or allow list
                     -trd, --temprmd ip
                            Remove an IP from the temporary IP ban list only
                     -tra, --temprma ip
                            Remove an IP from the temporary IP allow list only
                     -td, --tempdeny ip ttl [-p port] [-d direction] [comment]
                            Add  an  IP  to the temp IP ban list. ttl is how long to blocks for (default:seconds, can use one suffix of h/m/d). Optional port.
                            Optional direction of block can be one of: in, out or inout (default:in)
                     -ta, --tempallow ip ttl [-p port] [-d direction] [comment]
                            Add an IP to the temp IP allow list (default:inout)
                     -tf, --tempf
                            Flush all IPs from the temporary IP entries
                     -cp, --cping
                            PING all members in an lfd Cluster
                     -cg, --cgrep ip
                            Requests the --grep output for IP from each member in an lfd Cluster
                     -cd, --cdeny ip [comment]
                            Deny an IP in a Cluster and add to each remote /etc/csf/csf.deny
                     -ctd, --ctempdeny ip ttl [-p port] [-d direction] [comment]
                            Add an IP in a Cluster to the temp IP ban list (default:in)
                     -cr, --crm ip
                            Unblock an IP in a Cluster and remove from each remote /etc/csf/csf.deny and temporary list
                     -ca, --callow ip [comment]
                            Allow an IP in a Cluster and add to each remote /etc/csf/csf.allow
                     -cta, --ctempallow ip ttl [-p port] [-d direction] [comment]
                            Add an IP in a Cluster to the temp IP allow list (default:in)
                     -car, --carm ip
                            Remove allowed IP in a Cluster and remove from each remote /etc/csf/csf.allow and temporary list
                     -ci, --cignore ip [comment]
                            Ignore an IP in a Cluster and add to each remote /etc/csf/csf.ignore. Note: This will result in lfd being restarted
                     -cir, --cirm ip
                            Remove ignored IP in a Cluster and remove from each remote /etc/csf/csf.ignore. Note: This will result in lfd being restarted
                     -cc, --cconfig [name] [value]
                            Change configuration option [name] to [value] in a Cluster
                     -cf, --cfile [file]
                            Send [file] in a Cluster to /etc/csf/
                     -crs, --crestart
                            Cluster restart csf and lfd
                     --trace [add|remove] ip
                            Log SYN packets for an IP across iptables chains. Note, this can create a LOT  of  logging  information  in  /var/log/messages  so
                            should  only  be  used for a short period of time. This option requires the iptables TRACE module and access to the raw PREROUTING
                            chain to function
                     -m,  --mail [email]
                            Display Server Check in HTML or email to [email] if present
                     --rbl [email]
                            Process and display RBL Check in HTML or email to [email] if present
                     -lr, --logrun
                            Initiate Log Scanner report via lfd
                     -p, --ports
                            View ports on the server that have a running process behind them listening for external connections
                     --graphs [graph type] [directory]
                            Generate System Statistics html pages and images for a given graph type into a given directory. See ST_SYSTEM for requirements
                     --profile [command] [profile|backup] [profile|backup]
                                          Configuration profile functions for /etc/csf/csf.conf
                                          You can create your own profiles using the examples provided in /usr/local/csf/profiles/
                                          The profile reset_to_defaults.conf is a special case and will always be the latest default csf.conf
                            list
                                          Lists available profiles and backups
                            apply [profile]
                                          Modify csf.conf with Configuration Profile
                            backup "name"
                                          Create Configuration Backup with optional "name" stored in /var/lib/csf/backup/
                            restore [backup]
                                          Restore a Configuration Backup
                            keep [num]
                                          Remove old Configuration Backups and keep the latest [num]
                            diff [profile|backup] [profile|backup]
                                          Report differences between Configuration Profiles or Configuration Backups, only specify one [profile|backup] to  compare  to  the
                                          current Configuration
                     --mregen
                            MESSENGERV2 /etc/apache2/conf.d/csf_messenger.conf regeneration. This will also gracefully restart httpd
                     --cloudflare [command]
                                          Commands for interacting with the CloudFlare firewall. See /etc/csf/readme.txt and CF_ENABLE for more detailed information
                                          Note:  target  can  be  one of: An IP address; 2 letter Country Code; IP range CIDR.
                            list [all|block|challenge|whitelist] [user1,user2,domain1...]
                                          List specified type of CloudFlare Firewall rules for comma separated list of users/domains
                            add [block|challenge|whitelist] target [user1,user2,domain1...]
                                          Add CloudFlare Firewall rule action for target for comma separated list of users/domains only
                            del target [user1,user2,domain1...]
                                          Delete CloudFlare Firewall rule for target for comma separated list of users/domains only
                            tempadd [allow|deny] ip [user1,user2,domain1...]
                                          Add a temporary block for CF_TEMP seconds to both csf and the CloudFlare  Firewall  rule  for  ip  for  comma  separated  list  of
                                          users/domains as well as any user set to "any"
                     -c,  --check
                            Check for updates to csf but do not upgrade
                     -u,  --update
                            Check for updates to csf and upgrade if available
                     -uf    Force an update of csf whether and upgrade is required or not
                     -x,  --disable
                            Disable csf and lfd completely
                     -e,  --enable
                            Enable csf and lfd if previously disabled
                     -v,  --version
                            Show csf version

       Nameserver setup
              buy domain
              create personal dns server or glue record 
                     point ns1.domain and ns2.domain to server IP
              switch domain name servers to new ns1 and ns2 servers
              create new website account for domain on server

              create NS records by
              1. Create Nameserver and set ns1.doamin and ns2.domain to server ip
              2. go to zones/records, 
              add A record as 
                     ns1.domain > server ip
                     ns2.domain > server ip
              add ns records as 
                     domain > ns1.domain
                     domain > ns2.domain
              wait for propergation


       Change mail server port to 2525 Cyberpanel
              There you can issue SSL for MailServer.
              Go to https:/:8090/manageSSL/sslForMailServer

              Create email acct
              https://:8090/email/createEmailAccount

              listen on non-standard SMTP port such as 2525.
              Open /etc/postfix/master.cf, and 
                     just after 
                            smtp inet n – n – – smtpd 
                     paste:
                            2525 inet n - n - - smtpd

              sudo postfix reload

              Then
              netstat -lntu

              configure your web application to send emails via this mail server.

              Option	Value
              SMTP Host	Domain for which you issued MailServer SSL.
              SMTP User	Email that you just created.
              SMTP Password	Password for the above email.
              SMTP Port	2525


       Edit UI
       restart after changes
              Login
              This is the path to edit: /usr/local/CyberCP/loginSystem/templates/loginSystem/login.html
              Edit this file to make changes to the login screen.

              Dashboard
              /usr/local/CyberCP/baseTemplate/templates/baseTemplate/index.html




